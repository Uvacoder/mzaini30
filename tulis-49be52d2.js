import{S as t,i as s,s as e,b as a,c as n,e as l,t as o,h as i,d as c,l as r,f as u,g as d,m,a as b,o as f,p,n as h,r as g,j as v,q as w,u as y,v as $}from"./main-efb40e6d.js";import{b as j,s as q}from"./api-ad30823f.js";import{s as x,c as L,t as D}from"./tools-c085b23f.js";function F(t,s,e){const a=t.slice();return a[14]=s[e],a}function H(t){let s,e=t[4],l=[];for(let s=0;s<e.length;s+=1)l[s]=T(F(t,e,s));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();s=a()},m(t,e){for(let s=0;s<l.length;s+=1)l[s].m(t,e);n(t,s,e)},p(t,a){if(20&a){let n;for(e=t[4],n=0;n<e.length;n+=1){const o=F(t,e,n);l[n]?l[n].p(o,a):(l[n]=T(o),l[n].c(),l[n].m(s.parentNode,s))}for(;n<l.length;n+=1)l[n].d(1);l.length=e.length}},d(t){m(l,t),t&&d(s)}}}function T(t){let s,e,a,m,b=t[14].label+"";function f(...s){return t[8](t[14],...s)}return{c(){s=l("div"),e=o(b),i(s,"class","btn btn-light me-2 mb-2")},m(t,l){n(t,s,l),c(s,e),a||(m=r(s,"click",f),a=!0)},p(s,a){t=s,16&a&&b!==(b=t[14].label+"")&&u(e,b)},d(t){t&&d(s),a=!1,m()}}}function _(t){let s,e,a,o,u,m,v,w,y,$,j,q,x,L,D,F,T=t[4]&&H(t);return{c(){s=l("form"),e=l("div"),a=l("input"),o=b(),u=l("div"),m=l("input"),v=b(),w=l("div"),T&&T.c(),y=b(),$=l("div"),j=l("textarea"),q=b(),x=l("div"),x.innerHTML='<input type="submit" value="Publish" class="btn btn-success"/>',L=b(),i(a,"class","form-control"),a.required=!0,i(a,"placeholder","Judul"),i(e,"class","mb-3"),i(m,"class","form-control"),m.required=!0,i(m,"placeholder","Label"),i(u,"class","mb-3"),i(w,"class","mb-1"),i(j,"class","form-control"),i(j,"placeholder","Isi"),i($,"class","mb-3"),i(x,"class","mb-3"),document.title="Tulis"},m(l,i){n(l,s,i),c(s,e),c(e,a),f(a,t[1]),c(s,o),c(s,u),c(u,m),f(m,t[2]),c(s,v),c(s,w),T&&T.m(w,null),c(s,y),c(s,$),c($,j),t[9](j),f(j,t[3]),c(s,q),c(s,x),n(l,L,i),D||(F=[r(a,"input",t[6]),r(m,"input",t[7]),r(j,"input",t[10]),r(s,"submit",p(t[5]))],D=!0)},p(t,[s]){2&s&&a.value!==t[1]&&f(a,t[1]),4&s&&m.value!==t[2]&&f(m,t[2]),t[4]?T?T.p(t,s):(T=H(t),T.c(),T.m(w,null)):T&&(T.d(1),T=null),8&s&&f(j,t[3])},i:h,o:h,d(e){e&&d(s),T&&T.d(),t[9](null),e&&d(L),D=!1,g(F)}}}function k(t,s,e){let a,n;v(t,y,t=>e(11,a=t));let[l,o,i,c]=["","","",[]];w(()=>(()=>{const t=()=>e(0,n.style.height=window.innerHeight-140+"px",n);t(),window.addEventListener("resize",t)})());(async()=>{const t=new FormData;t.append("sql",btoa(btoa(`\n\t\t\tselect distinct label\n\t\t\tfrom database_${j}\n\t\t\torder by label\n\t\t`)));let s=await fetch(q,{method:"post",body:t}).then(t=>t.json());s=await s,e(4,c=s)})();return[n,l,o,i,c,async()=>{const t=new FormData;t.append("sql",btoa(btoa(`\n\t\t\tinsert into database_${j} (slug, judul, tanggal, isi, label)\n\t\t\tvalues ("${x(l)}", "${L(l)}", "${D()}", "${L(i)}", "${L(o).toLowerCase().replace(/ /g,"-")}")\n\t\t`)));let s=await fetch(q,{method:"post",body:t});s=await s,s&&a("/"+x(l))},function(){l=this.value,e(1,l)},function(){o=this.value,e(2,o)},t=>e(2,o=t.label),function(t){$[t?"unshift":"push"](()=>{n=t,e(0,n)})},function(){i=this.value,e(3,i)}]}export default class extends t{constructor(t){super(),s(this,t,k,_,e,{})}}
