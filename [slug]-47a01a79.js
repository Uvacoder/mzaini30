import{S as t,i as e,s as a,e as s,c as l,h as n,a as i,g as o,d as u,k as c,l as r,p as d,n as p,j as h,r as m,u as f,v as b}from"./main-796f8be5.js";import{b as v,a as g,s as w}from"./index-7c208677.js";import{c as _}from"./tools-c085b23f.js";function $(t,e,a){const s=t.slice();return s[14]=e[a],s}function j(t){let e,a;return{c(){e=s("option"),e.__value=a=t[14].label,e.value=e.__value},m(t,a){l(t,e,a)},p(t,s){16&s&&a!==(a=t[14].label)&&(e.__value=a,e.value=e.__value)},d(t){t&&n(e)}}}function y(t){let e,a,f,b,v,g,w,_,y,q,x,D,E,F,L,H,S,k=t[4],z=[];for(let e=0;e<k.length;e+=1)z[e]=j($(t,k,e));return document.title=L="Edit "+t[1],{c(){e=s("form"),a=s("div"),f=s("input"),b=i(),v=s("div"),g=s("input"),w=i(),_=s("datalist");for(let t=0;t<z.length;t+=1)z[t].c();y=i(),q=s("div"),x=s("textarea"),D=i(),E=s("div"),E.innerHTML='<input type="submit" value="Ubah" class="btn btn-success"/>',F=i(),o(f,"class","form-control"),f.required=!0,o(f,"placeholder","Judul"),o(a,"class","mb-3"),o(g,"class","form-control"),g.required=!0,o(g,"placeholder","Label"),o(g,"list","label"),o(v,"class","mb-3"),o(_,"id","label"),o(x,"class","form-control"),o(x,"placeholder","Isi"),o(q,"class","mb-3"),o(E,"class","mb-3")},m(s,n){l(s,e,n),u(e,a),u(a,f),c(f,t[1]),u(e,b),u(e,v),u(v,g),c(g,t[2]),u(e,w),u(e,_);for(let t=0;t<z.length;t+=1)z[t].m(_,null);u(e,y),u(e,q),u(q,x),t[9](x),c(x,t[3]),u(e,D),u(e,E),l(s,F,n),H||(S=[r(f,"input",t[7]),r(g,"input",t[8]),r(x,"input",t[10]),r(e,"submit",d(t[5]))],H=!0)},p(t,[e]){if(2&e&&f.value!==t[1]&&c(f,t[1]),4&e&&g.value!==t[2]&&c(g,t[2]),16&e){let a;for(k=t[4],a=0;a<k.length;a+=1){const s=$(t,k,a);z[a]?z[a].p(s,e):(z[a]=j(s),z[a].c(),z[a].m(_,null))}for(;a<z.length;a+=1)z[a].d(1);z.length=k.length}8&e&&c(x,t[3]),2&e&&L!==(L="Edit "+t[1])&&(document.title=L)},i:p,o:p,d(a){a&&n(e),h(z,a),t[9](null),a&&n(F),H=!1,m(S)}}}function q(t,e,a){let s,{slug:l}=e,[n,i,o,u]=["","","",[]];f(()=>(()=>{const t=()=>a(0,s.style.height=window.innerHeight-250+"px",s);t(),window.addEventListener("resize",t)})());(async()=>{const t=new FormData;t.append("sql",v(`\n\t\t\tselect distinct label\n\t\t\tfrom database_${g}\n\t\t\torder by label\n\t\t`));let e=await fetch(w,{method:"post",body:t}).then(t=>t.json());e=await e,a(4,u=e)})();return(async()=>{const t=new FormData;t.append("sql",v(`\n\t\t\tselect judul, label, isi\n\t\t\tfrom database_${g}\n\t\t\twhere slug = '${l}'\n\t\t`));let e=await fetch(w,{method:"post",body:t}).then(t=>t.json());e=await e,a(1,n=e[0].judul),a(2,i=e[0].label),a(3,o=e[0].isi)})(),t.$$set=t=>{"slug"in t&&a(6,l=t.slug)},[s,n,i,o,u,async()=>{const t=new FormData;t.append("sql",v(`\n\t\t\tupdate database_${g}\n\t\t\tset\n\t\t\t\tjudul = '${_(n)}',\n\t\t\t\tlabel = '${_(i)}',\n\t\t\t\tisi = '${_(o)}'\n\t\t\twhere slug = '${l}'\n\t\t`));let e=await fetch(w,{method:"post",body:t});e=await e,e&&alert("Sudah diupdate")},l,function(){n=this.value,a(1,n)},function(){i=this.value,a(2,i)},function(t){b[t?"unshift":"push"](()=>{s=t,a(0,s)})},function(){o=this.value,a(3,o)}]}export default class extends t{constructor(t){super(),e(this,t,q,y,a,{slug:6})}}
