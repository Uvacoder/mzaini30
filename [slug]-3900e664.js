import{S as t,i as a,s as e,e as s,b as l,g as n,a as o,f as i,c as u,o as r,l as c,p as d,n as b,h as p,r as f,q as h,u as m}from"./main-4af2098f.js";import{b as v,s as g}from"./api-ad30823f.js";import{c as w}from"./tools-c085b23f.js";function _(t,a,e){const s=t.slice();return s[14]=a[e],s}function $(t){let a,e;return{c(){a=s("option"),a.__value=e=t[14].label,a.value=a.__value},m(t,e){l(t,a,e)},p(t,s){16&s&&e!==(e=t[14].label)&&(a.__value=e,a.value=a.__value)},d(t){t&&n(a)}}}function y(t){let a,e,h,m,v,g,w,y,j,q,x,D,E,F,L,H,S,z=t[4],I=[];for(let a=0;a<z.length;a+=1)I[a]=$(_(t,z,a));return document.title=L="Edit "+t[1],{c(){a=s("form"),e=s("div"),h=s("input"),m=o(),v=s("div"),g=s("input"),w=o(),y=s("datalist");for(let t=0;t<I.length;t+=1)I[t].c();j=o(),q=s("div"),x=s("textarea"),D=o(),E=s("div"),E.innerHTML='<input type="submit" value="Ubah" class="btn btn-success"/>',F=o(),i(h,"class","form-control"),h.required=!0,i(h,"placeholder","Judul"),i(e,"class","mb-3"),i(g,"class","form-control"),g.required=!0,i(g,"placeholder","Label"),i(g,"list","label"),i(v,"class","mb-3"),i(y,"id","label"),i(x,"class","form-control"),i(x,"placeholder","Isi"),i(q,"class","mb-3"),i(E,"class","mb-3")},m(s,n){l(s,a,n),u(a,e),u(e,h),r(h,t[1]),u(a,m),u(a,v),u(v,g),r(g,t[2]),u(a,w),u(a,y);for(let t=0;t<I.length;t+=1)I[t].m(y,null);u(a,j),u(a,q),u(q,x),t[9](x),r(x,t[3]),u(a,D),u(a,E),l(s,F,n),H||(S=[c(h,"input",t[7]),c(g,"input",t[8]),c(x,"input",t[10]),c(a,"submit",d(t[5]))],H=!0)},p(t,[a]){if(2&a&&h.value!==t[1]&&r(h,t[1]),4&a&&g.value!==t[2]&&r(g,t[2]),16&a){let e;for(z=t[4],e=0;e<z.length;e+=1){const s=_(t,z,e);I[e]?I[e].p(s,a):(I[e]=$(s),I[e].c(),I[e].m(y,null))}for(;e<I.length;e+=1)I[e].d(1);I.length=z.length}8&a&&r(x,t[3]),2&a&&L!==(L="Edit "+t[1])&&(document.title=L)},i:b,o:b,d(e){e&&n(a),p(I,e),t[9](null),e&&n(F),H=!1,f(S)}}}function j(t,a,e){let s,{slug:l}=a,[n,o,i,u]=["","","",[]];h(()=>(()=>{const t=()=>e(0,s.style.height=window.innerHeight-250+"px",s);t(),window.addEventListener("resize",t)})());(async()=>{const t=new FormData;t.append("sql",btoa(btoa(`\n\t\t\tselect distinct label\n\t\t\tfrom database_${v}\n\t\t\torder by label\n\t\t`)));let a=await fetch(g,{method:"post",body:t}).then(t=>t.json());a=await a,e(4,u=a)})();return(async()=>{const t=new FormData;t.append("sql",btoa(btoa(`\n\t\t\tselect judul, label, isi\n\t\t\tfrom database_${v}\n\t\t\twhere slug = '${l}'\n\t\t`)));let a=await fetch(g,{method:"post",body:t}).then(t=>t.json());a=await a,e(1,n=a[0].judul),e(2,o=a[0].label),e(3,i=a[0].isi)})(),t.$$set=t=>{"slug"in t&&e(6,l=t.slug)},[s,n,o,i,u,async()=>{const t=new FormData;t.append("sql",btoa(btoa(`\n\t\t\tupdate database_${v}\n\t\t\tset\n\t\t\t\tjudul = '${w(n)}',\n\t\t\t\tlabel = '${w(o)}',\n\t\t\t\tisi = '${w(i)}'\n\t\t\twhere slug = '${l}'\n\t\t`)));let a=await fetch(g,{method:"post",body:t});a=await a,a&&alert("Sudah diupdate")},l,function(){n=this.value,e(1,n)},function(){o=this.value,e(2,o)},function(t){m[t?"unshift":"push"](()=>{s=t,e(0,s)})},function(){i=this.value,e(3,i)}]}export default class extends t{constructor(t){super(),a(this,t,j,y,e,{slug:6})}}
